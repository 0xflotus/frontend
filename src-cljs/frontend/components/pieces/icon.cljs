(ns frontend.components.pieces.icon
  "Each icon is a component in this namespace. Icons are block-level elements.
  They are square and `width: 100%`, so the correct way to size them is by
  controlling the width of their containing block.

  The correct way to place an icon in front of text is generally to align it on
  center with the text using flexbox and size the icon to `1em`. See the devcards
  for examples."
  (:require [devcards.core :as dc :refer-macros [defcard defcard-doc]])
  (:require-macros [frontend.utils :refer [html component ns-docstring]]))

(defn- icon
  "The svg element of an icon. Our icon SVG sizes are standardized so that the
  path (or paths) from an SVG built from the Sketch style guide should be
  suitable for passing into this component to build the icon."
  [content]
  (component
    (html
     [:svg {:xmlns "http://www.w3.org/2000/svg"
            :viewBox "2 2 20 20"
            :fill "currentColor"}
      content])))

(defn cancel-circle
  "Used to delete things, most notably on action buttons in table rows."
  []
  (component
    (icon
     (html
      [:path {:d "M12,2 C6.47,2 2,6.47 2,12 C2,17.53 6.47,22 12,22 C17.53,22 22,17.53 22,12 C22,6.47 17.53,2 12,2 L12,2 Z M17,15.59 L15.59,17 L12,13.41 L8.41,17 L7,15.59 L10.59,12 L7,8.41 L8.41,7 L12,10.59 L15.59,7 L17,8.41 L13.41,12 L17,15.59 L17,15.59 Z"}]))))

(defn github
  "Represents GitHub, or denotes that an org name refers to a GitHub org."
  []
  (component
    (icon
     (html
      [:path {:d "M12,2 C14.777778,2 17.1388887,2.99290757 19.0833333,4.9787234 C21.027778,6.96453923 22,9.3758863 22,12.212766 C22,13.6312054 21.722222,15.0141842 21.1666667,16.3617021 C20.6111113,17.7092201 19.8125,18.8439714 18.7708333,19.7659574 C17.7291667,20.6879435 16.5138887,21.4326243 15.125,22 C14.7083333,22 14.5,21.787234 14.5,21.3617021 L14.5,20.4042553 L14.5,18.5957447 C14.5,17.7446809 14.2916667,17.106383 13.875,16.6808511 C16.9305553,16.3971629 18.4583333,14.6950352 18.4583333,11.5744681 C18.4583333,10.5815605 18.1111113,9.73049668 17.4166667,9.0212766 C17.6944447,8.17021277 17.625,7.24822672 17.2083333,6.25531915 C16.652778,6.1134754 15.75,6.46808511 14.5,7.31914894 C13.6666667,7.03546077 12.8333333,6.89361702 12,6.89361702 C11.1666667,6.89361702 10.3333333,7.03546077 9.5,7.31914894 C8.94444467,6.89361702 8.42361133,6.60992885 7.9375,6.46808511 C7.45138867,6.32624136 7.13888867,6.25531915 7,6.25531915 L6.79166667,6.25531915 C6.375,7.24822672 6.30555533,8.17021277 6.58333333,9.0212766 C6.027778,9.73049668 5.75,10.5815605 5.75,11.5744681 C5.75,14.6950352 7.20833333,16.3971629 10.125,16.6808511 C9.847222,16.9645392 9.63888867,17.4609927 9.5,18.1702128 C8.25,18.7375884 7.277778,18.4539009 6.58333333,17.3191489 C6.16666667,16.6099289 5.68055533,16.2553191 5.125,16.2553191 C4.70833333,16.2553191 4.534722,16.3262414 4.60416667,16.4680851 C4.67361133,16.6099289 4.847222,16.7517733 5.125,16.893617 C5.54166667,17.1773052 5.88888867,17.6737586 6.16666667,18.3829787 C6.58333333,19.5177307 7.69444467,19.8723404 9.5,19.4468085 L9.5,20.7234043 L9.5,21.3617021 C9.5,21.787234 9.29166667,22 8.875,22 C6.79166667,21.2907799 5.125,20.0496456 3.875,18.2765957 C2.625,16.5035459 2,14.4822693 2,12.212766 C2,9.3758863 2.972222,6.96453923 4.91666667,4.9787234 C6.86111133,2.99290757 9.222222,2 12,2 L12,2 Z"}]))))

(defn bitbucket
  "Represents Bitbucket, or denotes that an org name refers to a Bitbucket org."
  []
  (component
    (icon
     (html
      [:path {:d "M12.0000614,3 L12.0000614,3.00025488 L11.9999387,3 C7.8713004,3 4.5,4.15386084 4.5,5.58659586 C4.5,5.96399367 5.40041933,11.3750186 5.75757094,13.5207435 C5.91769452,14.4831652 8.30998505,15.8942326 11.9980996,15.8942326 L12.0019004,15.8827616 L12.0019004,15.8942326 C15.6900149,15.8942326 18.0824281,14.4831652 18.2425517,13.5207435 C18.5997033,11.3750186 19.5,5.96399367 19.5,5.58659586 C19.5,4.15386084 16.1286997,3 12.0000614,3 L12.0000614,3 Z M17.3905618,15.6715667 C17.2765381,15.6715667 17.185074,15.7554328 17.185074,15.7554328 C17.185074,15.7554328 15.3381354,17.2757303 12.0000614,17.2758577 C8.6618646,17.2757303 6.81492609,15.7554328 6.81492609,15.7554328 C6.81492609,15.7554328 6.7235845,15.6715667 6.60956086,15.6715667 C6.47334541,15.6715667 6.34424117,15.766649 6.34424117,15.9764418 C6.34424117,15.9986192 6.34632547,16.0207966 6.3502489,16.0424641 C6.63677939,17.6373234 6.84631321,18.7690069 6.88309503,18.9413277 C7.13333412,20.1145619 9.34110251,20.9998726 11.9998161,21 L12.0001839,21 C14.6590201,20.9998726 16.8667885,20.1145619 17.1170276,18.9413277 C17.1536868,18.7690069 17.3632206,17.6373234 17.6498737,16.0424641 C17.6536745,16.0207966 17.6558815,15.9986192 17.6558815,15.9764418 C17.6558815,15.766649 17.5266546,15.6715667 17.3905618,15.6715667 L17.3905618,15.6715667 Z M11.9987126,6.3861285 C9.34600669,6.38166756 7.19623109,5.90255976 7.19721192,5.31575148 C7.19807022,4.72881576 9.34943971,4.2568455 12.002023,4.26130644 C14.654729,4.26576738 16.804382,4.74487518 16.8035237,5.3318109 C16.8026655,5.91861918 14.6514186,6.390462 11.9987126,6.3861285 L11.9987126,6.3861285 Z M12.0000614,14.1558577 C10.6832716,14.1558577 9.61586277,13.0460966 9.61586277,11.6774721 C9.61586277,10.3084652 10.6832716,9.19895907 12.0000614,9.19895907 C13.3167284,9.19895907 14.3841372,10.3084652 14.3841372,11.6774721 C14.3841372,13.0460966 13.3167284,14.1558577 12.0000614,14.1558577 L12.0000614,14.1558577 Z M13.1925284,11.6767074 C13.1925284,12.362804 12.6575979,12.9187679 11.9977318,12.9187679 C11.3377431,12.9187679 10.8029352,12.362804 10.8029352,11.6767074 C10.8029352,10.9906108 11.3377431,10.4346468 11.9977318,10.4346468 C12.6575979,10.4346468 13.1925284,10.9906108 13.1925284,11.6767074 L13.1925284,11.6767074 Z"}]))))

(defn settings
  "Represents navigation to a settings page."
  []
  (component
    (icon
     (html
      [:path {:d "M19.43,12.98 C19.47,12.66 19.5,12.34 19.5,12 C19.5,11.66 19.47,11.34 19.43,11.02 L21.54,9.37 C21.73,9.22 21.78,8.95 21.66,8.73 L19.66,5.27 C19.54,5.05 19.27,4.97 19.05,5.05 L16.56,6.05 C16.04,5.65 15.48,5.32 14.87,5.07 L14.49,2.42 C14.46,2.18 14.25,2 14,2 L10,2 C9.75,2 9.54,2.18 9.51,2.42 L9.13,5.07 C8.52,5.32 7.96,5.66 7.44,6.05 L4.95,5.05 C4.72,4.96 4.46,5.05 4.34,5.27 L2.34,8.73 C2.21,8.95 2.27,9.22 2.46,9.37 L4.57,11.02 C4.53,11.34 4.5,11.67 4.5,12 C4.5,12.33 4.53,12.66 4.57,12.98 L2.46,14.63 C2.27,14.78 2.22,15.05 2.34,15.27 L4.34,18.73 C4.46,18.95 4.73,19.03 4.95,18.95 L7.44,17.95 C7.96,18.35 8.52,18.68 9.13,18.93 L9.51,21.58 C9.54,21.82 9.75,22 10,22 L14,22 C14.25,22 14.46,21.82 14.49,21.58 L14.87,18.93 C15.48,18.68 16.04,18.34 16.56,17.95 L19.05,18.95 C19.28,19.04 19.54,18.95 19.66,18.73 L21.66,15.27 C21.78,15.05 21.73,14.78 21.54,14.63 L19.43,12.98 L19.43,12.98 Z M12,15.5 C10.07,15.5 8.5,13.93 8.5,12 C8.5,10.07 10.07,8.5 12,8.5 C13.93,8.5 15.5,10.07 15.5,12 C15.5,13.93 13.93,15.5 12,15.5 L12,15.5 Z"}]))))

(dc/do
  (defcard-doc
    (ns-docstring))

  (defn icon-card
    "Given a collection of icon component function vars, creates a React element
    suitable for showing off those icons as a devcard."
    [icon-vars]
    (html
     [:div
      (for [icon icon-vars]
        [:div {:style {:margin-bottom "20px"}}
         [:div {:style {:font-size "24px"
                        :display "flex"
                        :align-items "center"}}
          [:div {:style {:width "1em"
                         :margin-right "5px"}}
           (icon)]
          (-> icon meta :name name)]
         [:div (-> icon meta :doc)]])]))

  (defcard actions
    (icon-card [#'cancel-circle]))

  (defcard brand
    (icon-card [#'github
                #'bitbucket]))

  (defcard navigation
    (icon-card [#'settings])))

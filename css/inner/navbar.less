#topbar {
  .navbar {
    margin-bottom: 1em;
    margin-bottom: 1vw;
  }
  .navbar-inner {
    border-radius: 0px;
    border-left: 0px;
    border-right: 0px;
    @navDarkestBlue: #0d2e50;
    @navDarkBlue:  #134374;
    @navbarHeight: 50px;

    // the bar itself
    background: #1f4d80 url(../../../img/topbar-bg.png) repeat-x;
    border-top: 4px solid @navDarkBlue;
    height: @navbarHeight + 2;
    min-width: 500px;

    // circle logo
    a.brand {
      margin-top: 4px;
      margin-left: 20px;
      background: url(../../../img/circleci-top-logo.png) no-repeat;
      width: 150px;
      height: 20px;
    }

    // rest of the nav elements
    ul.nav {
      top: 2px;

      > li {
        height: @navbarHeight;
        line-height: @navbarHeight;
      }

      li {
        // environment element

        margin: 0 5px;

      }

      &.crumbs {

        // crumb elements
        li {

          a, span {
            display: inline-block;
            font-size: .9em;
            font-weight: normal;
            color: white;
          }

          span.label {
            background-color: inherit;
            padding: 5px;
          }

          &:hover {
            span.label {
              background: @navDarkBlue;
              .box-shadow(inset 0 0 3px darken(@navDarkBlue, 10%));
            }
            span.label-active {
              background: @navDarkestBlue;
            }
          }
          span.label-active {
            background: @navDarkestBlue;
          }

          &.build, &.branch, &.rev, &.project_settings, &.org_settings {
            &:before {
              content: '/';
              position: absolute;
              left: -6px;
              top: 1px;
              color: white;
              font-size: 1.2em;
            }
          }

          &.project, &.org {
            .label {
              font-size: 15px;
              padding: 8px;
            }
          }
        }
      }
      li {
        // rightside nav elements
        &.pane:hover {
          background: @navDarkBlue;
        }

        position: relative;
        font-family: 'Open Sans', sans-serif;
        a {
          cursor: pointer;
          line-height: @navbarHeight; // keeps this nav from overflowing the box
          font-size: 15px;
          padding: 0px 10px;//          padding: 0px 5px;
          color: white;
          .text-shadow(0, 1px,0px, #1B3E69);
          &.label-success {
            &:hover { background: darken(@green, 10%); }
          }
        }

        // dropbox header
        &.open > a.dropdown-toggle {
          background-color: @navDarkBlue;
          //border-top: 4px solid @navDarkBlue;
          height: 48px;
        }

        .dropdown-toggle {
          .gravatar {
            .border-radius(5px);
            border: 1px solid white;
            margin-right: 5px;
            width: 30px;
            height: 30px;
            vertical-align: bottom;
            // oddly hard to automatically center, so I'm calculating it's position.
            margin-bottom: floor((@navbarHeight - 30px) / 2);
            position: relative;
          }
        }

        ul.dropdown-menu {
          margin-top: 0;
          &:after {
            display: none; // get rid of caret
          }
        }

        // dropdown menu elements
        .dropdown-menu li {
          margin: 0;
          border-top: 1px solid lighten(@navDarkestBlue,4%);
          &:first-child {
            border: none;
          }

          a {
            height: 40px;
            line-height: 40px;
            color: #fff;
            padding: 0 10px;
            &:hover {
              background: @navDarkestBlue;
            }
            i {
              font-size: .8em;
              padding-right: .8em;
            }

          }
        }

        .dropdown-menu {

          &:before {
            border-bottom: 0;
          }
          &:after {
            border-bottom: 6px solid @navDarkBlue;
          }
          padding: 0;
          border-radius: 0;
          background: @navDarkBlue;

        }

        .env-production, .env-staging, .env-development, .env-test {
          .label;
          font-weight: normal;
          padding: 6px 8px;
          background: @navDarkestBlue;
          font-size: .9em;
        }

        .env-production { @prodRed: #c45b23; background-color: @prodRed; }
        .env-staging { @stagingYellow: #e2c256; background-color: @stagingYellow; color: black;}
        .env-development { background-color: @navDarkestBlue; }
        .env-test { @testGreen: #178261; background-color: @testGreen; }

      }
    }

  }

  // Retina prettyness
  @media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2) {
    .navbar-inner {
      a.brand {
        background: url(../../../img/circleci-top-logo@2x.png) no-repeat;
        background-size: 150px 41px;
      }
    }
  }
}
